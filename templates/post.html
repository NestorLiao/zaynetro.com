{% extends "base.html" %}

{% block content %}

<div class="post">
  <div class="container">
    <h2 class="post-date">{{ page.date | date(format="%Y-%m-%d") }}</h2>
    <h1 class="post-title">{{ page.title }}</h1>
  </div>

  <section class="post-body">
    <div class="table-of-contents">
      <ul>
        <li>
          <a href="#">â†‘ Top</a>
        </li>

        {% for h1 in page.toc %}
        <li>
          <a href="{{ h1.permalink | safe }}">{{ h1.title }}</a>
          {% if h1.children %}
          <ul>
            {% for h2 in h1.children %}
            <li>
              <a href="{{ h2.permalink | safe }}">{{ h2.title }}</a>
            </li>
            {% endfor %}
          </ul>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </div>

    <main class="container">
      <div class="post-content">
        {{ page.content | safe }}
      </div>

      <div class="like-box">
        {# <button type="button" class="like-btn" id="like-btn">Like</button> #}
        <bk-like-button></bk-like-button>
        <script async src="https://bereuusayynnpnamkkda.supabase.co/storage/v1/object/public/cdn/ui/a293fee1/8520/45a4/b35c/d99d3a690ce5/bk-like-button.js"></script>
      </div>
    </main>

    <div class="blank"></div>
  </section>
</div>

{% if page.extra.with_mermaid %}
<script defer type="module">
 import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

 let theme = 'default';
 if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
   theme = 'dark';
 }

 mermaid.initialize({
   startOnLoad: true,
   theme: theme,
 });
</script>
{% endif %}
<script defer type="module" src="/js/like-btn.js"></script>

{% endblock content %}
